<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="application-name" content="Iphone Calculator" />
    <meta name="author" content="Himanshu Chauhan" />

    <title>Calculator</title>
    <!-- stylesheets -->

    <link rel="stylesheet" href="css/devices.min.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/style.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/main.css">

</head>
<body>
    <section id="iphone6" class="silver">
        <div class="wrap">
    		<h1 class="new">iPhone 6 Calculator App</h1>
    		<div class="marvel-device iphone6 gold">
    			<div class="top-bar"></div>
    			<div class="sleep"></div>
    			<div class="volume"></div>
    			<div class="camera"></div>
    			<div class="sensor"></div>
    			<div class="speaker"></div>
    			<div class="screen">
                    <div class="view"></div>
                    <div id="keypad">
                        <span class="keys">AC</span>
                        <span class="keys"></span>
                        <span class="keys">%</span>
                        <span class="keys operator">÷</span>
                        <span class="keys">7</span>
                        <span class="keys">8</span>
                        <span class="keys">9</span>
                        <span class="keys operator">×</span>
                        <span class="keys">4</span>
                        <span class="keys">5</span>
                        <span class="keys">6</span>
                        <span class="keys operator">-</span>
                        <span class="keys">1</span>
                        <span class="keys">2</span>
                        <span class="keys">3</span>
                        <span class="keys operator">+</span>

                        <span class="keys big">0</span>
                        <span class="keys decimal">･</span>
                        <span class="keys operator">=</span>
                    </div>




    			</div>
    			<div class="home"></div>
    			<div class="bottom-bar"></div>
    		</div>
            <footer>

        <ul>
            <li>
                <a class="github-button" href="https://github.com/himanshuchauhan/iphone-calculator/fork" data-style="mega" data-count-href="/himanshuchauhan/iphone-calculator/network" data-count-api="/repos/himanshuchauhan/iphone-calculator#forks_count" data-count-aria-label="# forks on GitHub"
                aria-label="Fork himanshuchauhan/iphone-calculator on GitHub">Fork</a>
            </li>

            <li>
                <a class="github-button" href="https://github.com/himanshuchauhan/iphone-calculator" data-style="mega" data-count-href="/himanshuchauhan/iphone-calculator/stargazers" data-count-api="/repos/himanshuchauhan/iphone-calculator#stargazers_count" data-count-aria-label="# stargazers on GitHub"
                aria-label="Star himanshuchauhan/iphone-calculator on GitHub">Star</a>
            </li>

            <li>
                <a class="github-button" href="https://github.com/himanshuchauhan" data-style="mega" data-count-href="/himanshuchauhan/followers" data-count-api="/users/himanshuchauhan#followers" data-count-aria-label="# followers on GitHub" aria-label="Follow @himanshuchauhan on GitHub">Follow @himanshuchauhan</a>
            </li>
        </ul>
    </footer>

    	</div>
    </section>

<script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>

<script type="text/javascript">

// Get all the keys from document
var keys = document.querySelectorAll('span');
var operators = ['+', '-', '×', '÷'];
var decimalAdded = false;

// Add onclick event to all the keys and perform operations
for(var i = 0; i < keys.length; i++) {
	keys[i].onclick = function(e) {
		// Get the input and button values
		var input = document.querySelector('.view');
		var inputVal = input.innerHTML;
		var btnVal = this.innerHTML;


		// If AC key is pressed, erase everything
		if(btnVal == 'AC') {
			input.innerHTML = '';
			decimalAdded = false;
		}

		// If eval key is pressed, calculate and display the result
		else if(btnVal == '=') {
			var equation = inputVal;
			var lastChar = equation[equation.length - 1];

			// Replace all instances of x and ÷ with * and / respectively. This can be done easily using regex and the 'g' tag which will replace all instances of the matched character/substring
			equation = equation.replace(/×/g, '*').replace(/÷/g, '/');

			//  If it's an operator or a decimal, remove it
			if(operators.indexOf(lastChar) > -1 || lastChar == '.')
				equation = equation.replace(/.$/, '');

			if(equation)
				input.innerHTML = eval(equation);

			decimalAdded = false;
		}


		else if(operators.indexOf(btnVal) > -1) {
			// Operator is clicked
			// Get the last character from the equation
			var lastChar = inputVal[inputVal.length - 1];

			// Only add operator if input is not empty and there is no operator at the last
			if(inputVal != '' && operators.indexOf(lastChar) == -1)
				input.innerHTML += btnVal;

			// Allow minus if the string is empty
			else if(inputVal == '' && btnVal == '-')
				input.innerHTML += btnVal;

			// Replace the last operator with the newly pressed operator
			if(operators.indexOf(lastChar) > -1 && inputVal.length > 1) {

				input.innerHTML = inputVal.replace(/.$/, btnVal);
			}

			decimalAdded =false;
		}


		else if(btnVal == '.') {
			if(!decimalAdded) {
				input.innerHTML += btnVal;
				decimalAdded = true;
			}
		}

		// if any other key is pressed, just append it
		else {
			input.innerHTML += btnVal;
		}

		// prevent page jumps
		e.preventDefault();
	}
}

</script>




</body>
